# TDM Classification and Masking JSON Editor

⚠️ **BETA SOFTWARE - USE AT YOUR OWN RISK** ⚠️

This tool is provided completely free and is in **beta** status. There is **no support** provided. Use entirely at your own risk. The developers accept no liability for any issues, data loss, or problems that may arise from using this tool.

---

## Overview

A browser-based tool for viewing, editing, and managing TDM (Test Data Management) classification and masking JSON configuration files. This editor allows you to explore, filter, and modify your TDM CLI output files without needing any server-side infrastructure. Features a modern **blue-teal theme** for a clean, professional look.

## Features

### Core Functionality
- **View & Edit Classification Data**: Browse tables and columns with their classification types, make inline edits
- **View & Edit Masking Map**: Browse masking dataset assignments, edit datasets and deterministic settings
- **Schema & Table Filtering**: Filter by schema, table name, classification type, or masking dataset
- **Search**: Quick search across table names
- **Show/Hide Filters**: Quickly view tables with/without classification or masking assignments

### Editing Features
- **Inline Editing**: Click to edit classification types or masking datasets directly in the table view
- **Change Tracking**: All modifications are tracked with visual indicators (yellow highlighting)
- **Review & Save**: Review all pending changes before saving, with old vs new value comparison
- **Discard Changes**: Option to discard all pending changes
- **Export Modified Files**: Download updated classification.json and masking.json files

### Advanced Options

#### Masking Options Builder
- **Built-in Rules**: Enable/disable default classification rules
- **Custom Classification Rules**: Create rules based on column name patterns
- **Custom Datasets**: Define List, Expression, Conditional, or File-based datasets
- **Expression Builder Wizard**: Visual wizard for building expression-based datasets with:
  - Column name lookup from your classification.json
  - Quick-add buttons for common datasets (GivenNames, FamilyNames, Domains, etc.)
  - Live syntax-highlighted preview
  - Support for deterministic and non-deterministic expressions
- **Table/Column Exclusions**: Exclude specific tables or columns from classification
- **Column Overrides**: Force specific classification types for columns

#### Subset Options Builder
- **Starting Tables**: Define tables and filter clauses for subsetting
- **Excluded Tables**: Tables to ignore during subsetting
- **Static Data Tables**: Reference/lookup tables to include fully
- **Manual Relationships**: Define relationships not in database FKs
- **Settings**: Configure desired size, row thresholds, temp tables
- **Validation**: Warnings for mutually exclusive options (desiredSize vs startingTables)

### Additional Features
- **Viewer/Editor Mode Toggle**: Switch between view-only mode (default) and edit mode in the header
  - **Viewer Mode**: Browse and explore data without risk of accidental edits
  - **Editor Mode**: Full editing capabilities with change tracking
  - Mode preference persists in session storage
- **Welcome Tab**: Getting started guide for new users
- **Session Persistence**: All uploaded files (classification, masking, masking-options, subset-options) are remembered in browser session storage until you close the browser or click "Forget All Files"
- **Export All (ZIP)**: Download all JSON files as a single ZIP archive
- **Forget All Files**: Clear session and start fresh with new files
- **Preview & Export**: See JSON preview before downloading options files
- **Import Existing Options**: Load existing masking-options.json and subset-options.json files for editing

## Getting Started

1. Open `index.html` in any modern web browser (Chrome, Firefox, Edge, Safari)
2. Go to the **JSON Upload** tab
3. Upload your `classification.json` and `masking.json` files generated by the TDM CLI
4. Optionally upload existing `masking-options.json` and `subset-options.json` files to edit them
5. Use the **Classification** and **Masking Map** tabs to view and edit your data
6. Use the **Advanced Options** tab to build subset-options.json and masking-options.json files
7. Download your modified files using the Save/Export buttons

## Expression Builder Wizard

The Expression Builder Wizard helps you create expression-based datasets for realistic masked data. For example, creating email addresses that combine masked first and last names:

```
$(GivenNames($[FirstName])).$(FamilyNames($[LastName]))@$(Domains)
```

This produces realistic emails like: `anne.example@red-gate.com`

### Wizard Features:
- **Column Dropdown**: Automatically populated from your classification.json with all available column names
- **Quick-Add Buttons**: Common datasets and columns available with one click
- **Live Preview**: Syntax-highlighted expression preview as you build
- **Component Management**: Add, remove, and reorder expression components
- **Deterministic Support**: Optionally link datasets to columns for consistent masking
- **Blue-themed UI**: Clean, modern interface that matches the app theme

## Sample Files

> ⚠️ **Important**: The JSON files included in this repository (`classification.json`, `masking.json`, `masking-options.json`, `subset-options.json`) are **sample/dummy files for demonstration purposes only**. They do not represent real data. Please use your own TDM CLI output files for actual work.

## Browser Compatibility

This tool runs entirely in the browser with no server required. Compatible with:
- Google Chrome (recommended)
- Mozilla Firefox
- Microsoft Edge
- Safari

## Disclaimer

**THIS SOFTWARE IS PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.**

- This is **beta software** and may contain bugs or incomplete features
- **No support** is provided - use at your own risk
- The developers accept **no liability** for any data loss, corruption, or issues
- Always keep backups of your original JSON files before making edits
- This tool is not officially supported by Redgate Software

## License

Free to use for any purpose. No warranty provided.
